/**
 * Kissmetrics JS
 * https://github.com/evansolomon/kissmetrics-js
 * Copyright (c) 2013
 * Evan Solomon; Licensed MIT
 */

(function(){var t,e,r,n,o,s,i,u,p,a={}.hasOwnProperty,c=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};s="undefined"!=typeof exports,s===!0&&(u=require("http")),p=function(t){var e,r,n;return s===!0&&process.version.match(/^v0\.6/)?u.get(t):(null==(r=t.port)&&(t.port=80),null==(n=t.path)&&(t.path=""),e="http://"+t.host+":"+t.port+"/"+t.path,s===!0?u.get(e):(new Image).src=e)},r=function(){function t(t,e){this.apiKey=t,this.person=e,this.host="trk.kissmetrics.com",this.port=80,this.query_types={record:"e",set:"s",alias:"a"}}return t.prototype.record=function(t,e){return null==e&&(e={}),e._n=t,this._generateQuery("record",e),this},t.prototype.set=function(t){var e,r,n;for(r in t)n=t[r],e={},e[r]=n,this._generateQuery("set",e);return this},t.prototype.alias=function(t){return this._generateQuery("alias",{_n:t}),this},t.prototype._generateQuery=function(t,e){var r,n,o,s;return e._k=this.apiKey,e._p=this.person,n=function(){var t;t=[];for(r in e)s=e[r],r=encodeURIComponent(r),s=encodeURIComponent(s),t.push(""+r+"="+s);return t}(),o=n.join("&"),this.lastQuery=this._request(""+this.query_types[t]+"?"+o)},t.prototype._request=function(t){return p({host:this.host,port:this.port,path:t})},t}(),i=s===!0?exports:this,i.KissmetricsClient=r,o={get:function(t){return window.localStorage.getItem(t)},set:function(t,e){return window.localStorage.setItem(t,e)},"delete":function(t){return window.localStorage.removeItem(t)}},e={get:function(t){var e,r,n,o,s;for(t+="=",s=document.cookie.split(";"),n=0,o=s.length;o>n;n++)if(r=s[n],e=r.replace(/^\s+/,"").substring(t.length+1,r.length),e.indexOf(0===t))return e},set:function(t,e,r){var n;return null==r&&(r={expires:""}),r.expires||(n=new Date,n.setTime(n.getTime()+31536e6),r.expires="expires="+n.toGMTString()),document.cookie=""+name+"="+e+"; "+r.expires+"; path=/"},"delete":function(t){return e.set(t,"",{expires:-1})}},n=function(){function t(t){this.key=t,this.store=null!=window.localStorage?o:e}return t.prototype.get=function(){return this.store.get(this.key)},t.prototype.set=function(t){return this.store.set(this.key,t)},t.prototype["delete"]=function(){return this.store["delete"](this.key)},t}(),t=function(t){function e(t,r){var o;null==r&&(r={storageKey:"kissmetricsAnon"}),(this.storage=r.storage)||(this.storage=new n(r.storageKey)),(o=this.storage.get())||this.storage.set(o=this.createID()),e.__super__.constructor.call(this,t,o)}return c(e,t),e.prototype.createID=function(){var t,e;return t=function(){var t,r;for(r=[],e=t=0;10>=t;e=++t)r.push((0|65536*(1+Math.random())).toString(16).substring(1));return r}(),t.join("")},e}(r),i.AnonKissmetricsClient=t}).call(this);
//@ sourceMappingURL=min/kissmetrics.min.map