/**
 * Kissmetrics JS
 * https://github.com/evansolomon/kissmetrics-js
 * Copyright (c) 2013
 * Evan Solomon; Licensed MIT
 */

(function(){var e,t,r,n;e="undefined"!=typeof exports?"node":"browser","node"===e&&(n=require("https")),r=function(t){return"node"===e?n.get(t):(new Image).src=t},t=function(){function e(e,t){this.key=e,this.person=t,this.host="trk.kissmetrics.com",this.port=80,this.query_types={record:"e",set:"s",alias:"a"}}return e.prototype.record=function(e,t){return null==t&&(t={}),t._n=e,this._generateQuery("record",t)},e.prototype.set=function(e){var t,r,n,s;s=[];for(r in e)n=e[r],t={},t[r]=n,s.push(this._generateQuery("set",t));return s},e.prototype.alias=function(e){return this._generateQuery("alias",{_n:e})},e.prototype._generateQuery=function(e,t){var r,n,s,o;t._k=this.key,t._p=this.person,n=[];for(r in t)o=t[r],n.push(""+encodeURIComponent(r)+"="+encodeURIComponent(o));return s=n.join("&"),this._request(""+this.query_types[e]+"?"+s)},e.prototype._request=function(e){return r("https://"+this.host+":"+this.port+"/"+e)},e}(),"node"===e?exports.KissmetricsClient=t:this.KissmetricsClient=t}).call(this);