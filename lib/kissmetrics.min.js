/**
 * Kissmetrics JS
 * https://github.com/evansolomon/kissmetrics-js
 * Copyright (c) 2013
 * Evan Solomon; Licensed MIT
 */

(function(){var t,e,r,n;t="undefined"!=typeof exports?"node":"browser","node"===t&&(n=require("https")),r=function(e){var r,o,s;return null==(o=e.port)&&(e.port=80),null==(s=e.path)&&(e.path=""),r="https://"+e.host+":"+e.port+"/"+e.path,"node"===t?n.get(r):(new Image).src=r,r},e=function(){function t(t,e){this.key=t,this.person=e,this.host="trk.kissmetrics.com",this.port=80,this.query_types={record:"e",set:"s",alias:"a"}}return t.prototype.record=function(t,e){return null==e&&(e={}),e._n=t,this.generateQuery("record",e)},t.prototype.set=function(t){var e,r,n,o;o=[];for(r in t)n=t[r],e={},e[r]=n,o.push(this.generateQuery("set",e));return o},t.prototype.alias=function(t){return this.generateQuery("alias",{_n:t})},t.prototype.generateQuery=function(t,e){var r,n,o,s;e._k=this.key,e._p=this.person,n=[];for(r in e)s=e[r],n.push(""+encodeURIComponent(r)+"="+encodeURIComponent(s));return o=n.join("&"),this.request(""+this.query_types[t]+"?"+o)},t.prototype.request=function(t){return r({host:this.host,port:this.port,path:t})},t}(),"node"===t?exports.KissmetricsClient=e:this.KissmetricsClient=e}).call(this);